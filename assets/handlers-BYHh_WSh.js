import{i as c,a as k}from"./vendor-htf-bluc.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))d(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&d(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function d(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}})();const r={form:document.querySelector(".search-form"),clearSearchBtn:document.querySelector(".search-form__btn-clear"),listCategories:document.querySelector(".categories"),listProducts:document.querySelector(".products"),notFound:document.querySelector(".not-found"),loader:document.querySelector(".loader"),modal:document.querySelector(".modal"),productModal:document.querySelector(".modal-product"),loadMoreBtn:document.querySelector(".load-more__btn"),addToCartBtn:document.querySelector(".modal-product__btn--cart"),addToWishBtn:document.querySelector(".modal-product__btn--wishlist"),cartCount:document.querySelector("[data-cart-count]"),wishListCount:document.querySelector("[data-wishlist-count]")};function S(){r.notFound.classList.add("not-found--visible")}function P(){r.notFound.classList.contains("not-found--visible")&&r.notFound.classList.remove("not-found--visible")}function _(t="",e=1,s=""){return t?`https://dummyjson.com/products/search?q=${t}&limit=12&skip=${(e-1)*12}`:s?`https://dummyjson.com/products/category/${s}?limit=12&skip=${(e-1)*12}`:`https://dummyjson.com/products?limit=12&skip=${(e-1)*12}`}function T(t){return`https://dummyjson.com/products/${t}`}function $(){r.loader.style.display="inline-block"}function g(){r.loader.style.display="none"}function p(){r.loadMoreBtn.style.display="block"}function m(){r.loadMoreBtn.style.display="none"}function b(){const t=document.querySelector(".products__item").getBoundingClientRect();window.scrollBy({top:t.height*1,behavior:"smooth"})}let o={LS_WL_KEY:"userWishList",LS_USER_CART_KEY:"userCart",BASE_URL_ALL:"https://dummyjson.com/products?limit=12&skip=12",CATEGORIES_KEY:"https://dummyjson.com/products/category-list",currentPage:1,selectedProdId:"",selectedCategory:"",searchValue:""};function E(t){localStorage.setItem(o.LS_WL_KEY,JSON.stringify(t)),w()}function h(){return JSON.parse(localStorage.getItem(o.LS_WL_KEY))}function R(t){E(h().filter(e=>e!==t)),w()}function B(t){localStorage.setItem(o.LS_USER_CART_KEY,JSON.stringify(t)),v()}function y(){return JSON.parse(localStorage.getItem(o.LS_USER_CART_KEY))}function A(t){B(y().filter(e=>e!==t)),v()}function O(t){t.unshift("all");const e=t.map(s=>`<li class="categories__item">
            <button class="categories__btn" type="button">${s}</button>
        </li>
        `).join("");r.listCategories.innerHTML=e}function u(t){const e=t.map(({id:s,images:d,description:n,title:a,brand:l,category:C,price:I})=>`<li class="products__item" data-id="${s}">
            <img class="products__image" src="${d[0]}" alt="${n}"/>
            <p class="products__title">${a}</p>
            <p class="products__brand"><span class="products__brand--bold">Brand: ${l}</span></p>
            <p class="products__category">Category: ${C} </p>
            <p class="products__price">Price: ${I} $</p>
        </li>`).join("");r.listProducts.insertAdjacentHTML("beforeend",e)}function j({images:t,description:e,title:s,tags:d,shippingInformation:n,returnPolicy:a,price:l}){const C=`<img class="modal-product__img" src="${t[0]}" alt="${e}" />
        <div class="modal-product__content">
        <p class="modal-product__title">${s}</p>
        <ul class="modal-product__tags">${d.join(", ")}</ul>
        <p class="modal-product__description">${e}</p>
        <p class="modal-product__shipping-information">Shipping: ${n}</p>
        <p class="modal-product__return-policy">Return Policy: ${a}</p>
        <p class="modal-product__price">Price: ${l} $</p>
        </div>
    `;r.productModal.innerHTML=C}function f(){r.listProducts.innerHTML=""}function v(){const t=y()||[];r.cartCount.textContent=t.length}function w(){const t=h()||[];r.wishListCount.textContent=t.length}function i(t){return k.get(`${t}`)}async function V(){try{const t=await i(o.CATEGORIES_KEY);O(t.data)}catch(t){c.error({message:t.message})}}async function F(){try{const t=await i(_(o.searchValue,o.currentPage));u(t.data.products),t.data.total>(o.currentPage-1)*12?(o.currentPage++,p()):m()}catch(t){c.error({message:t.message})}finally{g()}}async function x(t){f();try{let s=t.map(a=>T(a)).map(a=>i(a));const n=(await Promise.all(s)).map(a=>a.data);u(n)}catch(e){c.error({message:e.message})}finally{g()}}async function N(t){f();try{let s=t.map(a=>T(a)).map(a=>i(a));const n=(await Promise.all(s)).map(a=>a.data);u(n)}catch(e){c.error({message:e.message})}finally{g()}}function Y(){r.modal.classList.add("modal--is-open"),(h()||[]).some(s=>s===o.selectedProdId)?r.addToWishBtn.textContent="Remove from Wishlist":r.addToWishBtn.textContent="Add to Wishlist",(y()||[]).some(s=>s===o.selectedProdId)?r.addToCartBtn.textContent="Remove from Cart":r.addToCartBtn.textContent="Add to Cart",document.addEventListener("keydown",W),r.addToCartBtn.addEventListener("click",M),r.addToWishBtn.addEventListener("click",q)}function U(t){(t.target.classList.contains("modal__close-btn")||t.target===t.currentTarget)&&L()}function G(t){(t.target.classList.contains("modal__close-btn")||t.target===t.currentTarget)&&(L(),x(h()))}function D(t){(t.target.classList.contains("modal__close-btn")||t.target===t.currentTarget)&&(L(),N(y()))}function W(t){t.key==="Escape"&&L()}function L(){r.modal.classList.contains("modal--is-open")&&r.modal.classList.remove("modal--is-open"),document.removeEventListener("keydown",W),r.addToCartBtn.removeEventListener("click",M),r.addToWishBtn.removeEventListener("click",q)}function H(t){if(t.target.tagName==="BUTTON"){o.selectedCategory=t.target.textContent;const e=`https://dummyjson.com/products/category/${o.selectedCategory}?limit=12&skip=0`;if(o.selectedCategory==="all"){o.selectedCategory="",o.currentPage=2,o.searchValue="",i(o.BASE_URL_ALL).then(s=>{o.currentPage++,f(),u(s.data.products),p()}).catch(s=>c.error({message:`${s.message}`}));return}else i(e).then(s=>{if(console.log(s.data.total),s.data.total===0){S();return}console.log(s.data.total),P(),f(),u(s.data.products),s.data.total<12?m():p()}).catch(s=>c.error({message:`${s.message}`})).finally(()=>m)}}function J(t){t.target.tagName!="UL"&&(o.selectedProdId=t.target.closest("li").dataset.id,i(`https://dummyjson.com/products/${o.selectedProdId}`).then(e=>{j(e.data),Y()}).catch(e=>c.error({message:`${e.message}`})))}function q(t){const e=h()||[];if(e.some(s=>s===o.selectedProdId)){R(o.selectedProdId),r.addToWishBtn.textContent="Add to Wishlist";return}e.push(o.selectedProdId),E(e),r.addToWishBtn.textContent="Remove from Wishlist"}function M(t){const e=y()||[];if(e.some(s=>s===o.selectedProdId)){A(o.selectedProdId),r.addToCartBtn.textContent="Add to Cart";return}e.push(o.selectedProdId),B(e),r.addToCartBtn.textContent="Remove from Cart"}function z(t){$(),console.log(_(o.searchValue,o.currentPagey)),i(_(o.searchValue,o.currentPage,o.selectedCategory)).then(e=>{e.data.total<=o.currentPage*12?(m(),c.warning({message:"Oops! You reached all of the goods!"})):p(),u(e.data.products),o.currentPage++,b()}).catch(e=>c.error({message:`${e.message}`})).finally(()=>g())}function Q(t){if(t.preventDefault(),P(),$(),o.searchValue=t.target.elements.searchValue.value.trim(),!o.searchValue){c.error({message:"Please enter a valid name!"});return}o.currentPage=1,i(_(o.searchValue)).then(e=>{if(e.data.total===0){f(),m(),S(),c.info({message:"Sorry! No results"});return}else p();if(e.data.total<=(o.currentPage-1)*12){m(),c.warning({message:"Oops! You reach all of goods!"});return}f(),u(e.data.products),o.currentPage++,b()}).catch(e=>c.error({message:`${console.log(e)}`})).finally(()=>{g()}),r.form.reset()}function X(){r.form.elements.searchValue.value=""}export{w as a,P as b,G as c,X as d,Q as e,x as f,h as g,J as h,z as i,V as j,F as k,H as l,U as m,S as n,y as o,N as p,D as q,r,v as s};
//# sourceMappingURL=handlers-BYHh_WSh.js.map
