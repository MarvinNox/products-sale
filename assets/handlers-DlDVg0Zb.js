import{a as M,i as r}from"./vendor-X279WPgE.js";let o={LS_WL_KEY:"userWishList",LS_USER_CART_KEY:"userCart",BASE_URL_ALL:"https://dummyjson.com/products?limit=12&skip=12",CATEGORIES_KEY:"https://dummyjson.com/products/category-list",currentPage:1,selectedProdId:"",selectedCategory:"",searchValue:""};const s={form:document.querySelector(".search-form"),clearSearchBtn:document.querySelector(".search-form__btn-clear"),listCategories:document.querySelector(".categories"),listProducts:document.querySelector(".products"),notFound:document.querySelector(".not-found"),loader:document.querySelector(".loader"),modal:document.querySelector(".modal"),productModal:document.querySelector(".modal-product"),loadMoreBtn:document.querySelector(".load-more__btn"),addToCartBtn:document.querySelector(".modal-product__btn--cart"),addToWishBtn:document.querySelector(".modal-product__btn--wishlist"),cartCount:document.querySelector("[data-cart-count]"),wishListCount:document.querySelector("[data-wishlist-count]")};function L(){s.notFound.classList.add("not-found--visible")}function C(){s.notFound.classList.contains("not-found--visible")&&s.notFound.classList.remove("not-found--visible")}function y(t="",e=1,a=""){return t?`https://dummyjson.com/products/search?q=${t}&limit=12&skip=${(e-1)*12}`:a?`https://dummyjson.com/products/category/${a}?limit=12&skip=${(e-1)*12}`:`https://dummyjson.com/products?limit=12&skip=${(e-1)*12}`}function Y(t){return`https://dummyjson.com/products/${t}`}function S(){s.loader.style.display="inline-block"}function $(){s.loader.style.display="none"}function d(){s.loadMoreBtn.style.display="block"}function n(){s.loadMoreBtn.style.display="none"}function T(){const t=document.querySelector(".products__item").getBoundingClientRect();window.scrollBy({top:t.height*1,behavior:"smooth"})}function c(t){return M.get(`${t}`)}function O(t){t.unshift("all");const e=t.map(a=>`<li class="categories__item">
            <button class="categories__btn" type="button">${a}</button>
        </li>
        `).join("");s.listCategories.innerHTML=e}function l(t){const e=t.map(({id:a,images:p,description:f,title:g,brand:h,category:_,price:I})=>`<li class="products__item" data-id="${a}">
            <img class="products__image" src="${p[0]}" alt="${f}"/>
            <p class="products__title">${g}</p>
            <p class="products__brand"><span class="products__brand--bold">Brand: ${h}</span></p>
            <p class="products__category">Category: ${_} </p>
            <p class="products__price">Price: ${I} $</p>
        </li>`).join("");s.listProducts.insertAdjacentHTML("beforeend",e)}function R({images:t,description:e,title:a,tags:p,shippingInformation:f,returnPolicy:g,price:h}){const _=`<img class="modal-product__img" src="${t[0]}" alt="${e}" />
        <div class="modal-product__content">
        <p class="modal-product__title">${a}</p>
        <ul class="modal-product__tags">${p.join(", ")}</ul>
        <p class="modal-product__description">${e}</p>
        <p class="modal-product__shipping-information">Shipping: ${f}</p>
        <p class="modal-product__return-policy">Return Policy: ${g}</p>
        <p class="modal-product__price">Price: ${h} $</p>
        </div>
    `;s.productModal.innerHTML=_}function i(){s.listProducts.innerHTML=""}function P(){const t=m()||[];s.cartCount.textContent=t.length}function v(){const t=u()||[];s.wishListCount.textContent=t.length}function B(t){localStorage.setItem(o.LS_WL_KEY,JSON.stringify(t)),v()}function u(){return JSON.parse(localStorage.getItem(o.LS_WL_KEY))}function q(t){B(u().filter(e=>e!==t)),v()}function E(t){localStorage.setItem(o.LS_USER_CART_KEY,JSON.stringify(t)),P()}function m(){return JSON.parse(localStorage.getItem(o.LS_USER_CART_KEY))}function A(t){E(m().filter(e=>e!==t)),P()}function j(){s.modal.classList.add("modal--is-open"),(u()||[]).some(a=>a===o.selectedProdId)?s.addToWishBtn.textContent="Remove from Wishlist":s.addToWishBtn.textContent="Add to Wishlist",(m()||[]).some(a=>a===o.selectedProdId)?s.addToCartBtn.textContent="Remove from Cart":s.addToCartBtn.textContent="Add to Cart",document.addEventListener("keydown",b),s.addToCartBtn.addEventListener("click",w),s.addToWishBtn.addEventListener("click",k)}function U(t){(t.target.classList.contains("modal__close-btn")||t.target===t.currentTarget)&&W()}function b(t){t.key==="Escape"&&W()}function W(){s.modal.classList.contains("modal--is-open")&&s.modal.classList.remove("modal--is-open"),document.removeEventListener("keydown",b),s.addToCartBtn.removeEventListener("click",w),s.addToWishBtn.removeEventListener("click",k)}function V(t){if(t.target.tagName==="BUTTON"){o.selectedCategory=t.target.textContent;const e=`https://dummyjson.com/products/category/${o.selectedCategory}?limit=12&skip=0`;if(o.selectedCategory==="all"){o.selectedCategory="",o.currentPage=2,o.searchValue="",c(o.BASE_URL_ALL).then(a=>{o.currentPage++,i(),l(a.data.products),d()}).catch(a=>r.error({message:`${a.message}`}));return}else c(e).then(a=>{if(console.log(a.data.total),a.data.total===0){L();return}console.log(a.data.total),C(),i(),l(a.data.products),a.data.total<12?n():d()}).catch(a=>r.error({message:`${a.message}`})).finally(()=>n)}}function F(t){t.target.tagName!="UL"&&(o.selectedProdId=t.target.closest("li").dataset.id,c(`https://dummyjson.com/products/${o.selectedProdId}`).then(e=>{R(e.data),j()}).catch(e=>r.error({message:`${e.message}`})))}function k(t){const e=u()||[];if(e.some(a=>a===o.selectedProdId)){q(o.selectedProdId),s.addToWishBtn.textContent="Add to Wishlist";return}e.push(o.selectedProdId),B(e),s.addToWishBtn.textContent="Remove from Wishlist"}function w(t){const e=m()||[];if(e.some(a=>a===o.selectedProdId)){A(o.selectedProdId),s.addToCartBtn.textContent="Add to Cart";return}e.push(o.selectedProdId),E(e),s.addToCartBtn.textContent="Remove from Cart"}function K(t){S(),console.log(y(o.searchValue,o.currentPagey)),c(y(o.searchValue,o.currentPage,o.selectedCategory)).then(e=>{e.data.total<=o.currentPage*12?(n(),r.warning({message:"Oops! You reached all of the goods!"})):d(),l(e.data.products),o.currentPage++,T()}).catch(e=>r.error({message:`${e.message}`})).finally(()=>$())}function N(t){if(t.preventDefault(),C(),S(),o.searchValue=t.target.elements.searchValue.value.trim(),!o.searchValue){r.error({message:"Please enter a valid name!"});return}o.currentPage=1,c(y(o.searchValue)).then(e=>{if(e.data.total===0){i(),n(),L(),r.info({message:"Sorry! No results"});return}else d();if(e.data.total<=(o.currentPage-1)*12){n(),r.warning({message:"Oops! You reach all of goods!"});return}i(),l(e.data.products),o.currentPage++,T()}).catch(e=>r.error({message:`${e.message}`})).finally(()=>{$()}),s.form.reset()}function G(){s.form.elements.searchValue.value=""}export{o as S,v as a,Y as b,s as c,U as d,O as e,d as f,u as g,F as h,n as i,$ as j,V as k,N as l,G as m,K as n,y as o,c as p,l as r,P as s};
//# sourceMappingURL=handlers-DlDVg0Zb.js.map
