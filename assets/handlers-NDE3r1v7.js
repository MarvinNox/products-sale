import{i as c,a as U}from"./vendor-CBLHhzjb.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function a(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=a(n);fetch(n.href,r)}})();const s={form:document.querySelector(".search-form"),clearSearchBtn:document.querySelector(".search-form__btn-clear"),listCategories:document.querySelector(".categories"),listProducts:document.querySelector(".products"),notFound:document.querySelector(".not-found"),loader:document.querySelector(".loader"),modal:document.querySelector(".modal"),productModal:document.querySelector(".modal-product"),loadMoreBtn:document.querySelector(".load-more__btn"),addToCartBtn:document.querySelector(".modal-product__btn--cart"),addToWishBtn:document.querySelector(".modal-product__btn--wishlist"),cartCount:document.querySelector("[data-cart-count]"),wishListCount:document.querySelector("[data-wishlist-count]"),totalItemsCount:document.querySelector("[data-count]"),totalItemsPrice:document.querySelector("[data-price]"),buyBtn:document.querySelector(".cart-summary__btn"),scrollUpBtn:document.querySelector(".scrollToTopBtn"),colorChangeBtn:document.querySelector(".theme-toggle-button"),root:document.documentElement},e={LS_WL_KEY:"userWishList",LS_USER_CART_KEY:"userCart",LS_USER_THEME:"dark",BASE_URL_ALL:"https://dummyjson.com/products?limit=12&skip=0",CATEGORIES_KEY:"https://dummyjson.com/products/category-list",currentPage:1,selectedProdId:"",selectedCategory:"",searchValue:"",light:{"--main__text":"#242424","--main__back":"rgba(255, 255, 255, 0.87)","--search__back":"#f8f9fa","--search__back--focus":"#fff","--nav__counter":"#ff6b0a","--categ__btn":"#2d3748","--products__item--back":"#fff","--products__categ":"#4a5568","--color2":"#010101"},dark:{"--main__text":"#e9e8e8","--main__back":"rgba(0, 0, 0, 0.87)","--search__back":"#131212","--search__back--focus":"#000","--nav__counter":"f8f9fa","--categ__btn":"#d2c8b7","--products__item--back":"#3a3a3a","--products__categ":"#b5aa97","--color2":"#ffffff"}};function A(t){t.unshift("all");const o=t.map(a=>`<li class="categories__item">
            <button class="categories__btn" type="button">${a}</button>
        </li>
        `).join("");s.listCategories.innerHTML=o}function u(t){const o=t.map(({id:a,images:i,description:n,title:r,brand:l,category:f,price:R})=>`<li class="products__item" data-id="${a}">
            <img class="products__image" src="${i[0]}" alt="${n}"/>
            <p class="products__title">${r}</p>
            <p class="products__brand"><span class="products__brand--bold">Brand: ${l}</span></p>
            <p class="products__category">Category: ${f} </p>
            <p class="products__price">Price: ${R} $</p>
        </li>`).join("");s.listProducts.insertAdjacentHTML("beforeend",o)}function j({images:t,description:o,title:a,tags:i,shippingInformation:n,returnPolicy:r,price:l}){const f=`<img class="modal-product__img" src="${t[0]}" alt="${o}" />
        <div class="modal-product__content">
        <p class="modal-product__title">${a}</p>
        <ul class="modal-product__tags">${i.join(", ")}</ul>
        <p class="modal-product__description">${o}</p>
        <p class="modal-product__shipping-information">Shipping: ${n}</p>
        <p class="modal-product__return-policy">Return Policy: ${r}</p>
        <p class="modal-product__price">Price: ${l} $</p>
        </div>
    `;s.productModal.innerHTML=f}function m(){s.listProducts.innerHTML=""}function P(){const t=_()||[];s.cartCount.textContent=t.length}function E(){const t=h()||[];s.wishListCount.textContent=t.length}function w(t){localStorage.setItem(e.LS_WL_KEY,JSON.stringify(t)),E()}function h(){return JSON.parse(localStorage.getItem(e.LS_WL_KEY))}function N(t){w(h().filter(o=>o!==t)),E()}function B(t){localStorage.setItem(e.LS_USER_CART_KEY,JSON.stringify(t)),P()}function _(){return JSON.parse(localStorage.getItem(e.LS_USER_CART_KEY))}function Y(t){B(_().filter(o=>o!==t)),P()}function $(){return JSON.parse(localStorage.getItem(e.LS_USER_THEME))||!1}function T(t){localStorage.setItem(e.LS_USER_THEME,JSON.stringify(t))}function v(){s.notFound.classList.add("not-found--visible")}function k(){s.notFound.classList.contains("not-found--visible")&&s.notFound.classList.remove("not-found--visible")}function S(t="",o=1,a=""){return t?`https://dummyjson.com/products/search?q=${t}&limit=12&skip=${(o-1)*12}`:a?`https://dummyjson.com/products/category/${a}?limit=12&skip=${(o-1)*12}`:`https://dummyjson.com/products?limit=12&skip=${(o-1)*12}`}function I(t){return`https://dummyjson.com/products/${t}`}function q(){s.loader.style.display="inline-block"}function y(){s.loader.style.display="none"}function p(){s.loadMoreBtn.style.display="block"}function g(){s.loadMoreBtn.style.display="none"}function M(){const t=document.querySelector(".products__item").getBoundingClientRect();window.scrollBy({top:t.height*1,behavior:"smooth"})}function L(t){Object.entries(t).forEach(([o,a])=>{s.root.style.setProperty(o,a)})}function z(){$()&&L(e.dark)}function b(){const t=document.querySelector("button.categories__btn--active");t&&t.classList.remove("categories__btn--active")}function d(t){return U.get(`${t}`)}async function Q(){try{const t=await d(e.CATEGORIES_KEY);A(t.data)}catch(t){c.error({message:t.message})}}async function F(){try{const t=await d(S(e.searchValue,e.currentPage));u(t.data.products),t.data.total>(e.currentPage-1)*12?(e.currentPage++,p()):g()}catch(t){c.error({message:t.message})}finally{y()}}async function K(t){m();try{let a=t.map(r=>I(r)).map(r=>d(r));const n=(await Promise.all(a)).map(r=>r.data);u(n)}catch(o){c.error({message:o.message})}finally{y()}}async function V(t){m();try{let a=t.map(r=>I(r)).map(r=>d(r));const i=await Promise.all(a),n=i.map(r=>r.data);if(u(n),i.length>0){s.totalItemsCount.textContent=i.length;const r=i.map(l=>l.data.price).reduce((l,f)=>l+f);s.totalItemsPrice.textContent=`$${r.toFixed(2)}`}else s.totalItemsCount.textContent=0,s.totalItemsPrice.textContent="$0"}catch(o){c.error({message:o.message})}finally{y()}}function H(){s.modal.classList.add("modal--is-open"),(h()||[]).some(a=>a===e.selectedProdId)?s.addToWishBtn.textContent="Remove from Wishlist":s.addToWishBtn.textContent="Add to Wishlist",(_()||[]).some(a=>a===e.selectedProdId)?s.addToCartBtn.textContent="Remove from Cart":s.addToCartBtn.textContent="Add to Cart",document.addEventListener("keydown",x),s.addToCartBtn.addEventListener("click",O),s.addToWishBtn.addEventListener("click",W)}function X(t){(t.target.classList.contains("modal__close-btn")||t.target===t.currentTarget)&&C()}function Z(t){(t.target.classList.contains("modal__close-btn")||t.target===t.currentTarget)&&(C(),K(h()))}function tt(t){(t.target.classList.contains("modal__close-btn")||t.target===t.currentTarget)&&(C(),V(_()))}function x(t){t.key==="Escape"&&C()}function C(){s.modal.classList.contains("modal--is-open")&&s.modal.classList.remove("modal--is-open"),document.removeEventListener("keydown",x),s.addToCartBtn.removeEventListener("click",O),s.addToWishBtn.removeEventListener("click",W)}async function et(t){if(t.target.tagName==="BUTTON"){b(),t.target.classList.add("categories__btn--active"),e.selectedCategory=t.target.textContent;const o=`https://dummyjson.com/products/category/${e.selectedCategory}?limit=12&skip=0`;if(e.selectedCategory==="all"){e.selectedCategory="",e.currentPage=1,e.searchValue="",await d(e.BASE_URL_ALL).then(a=>{e.currentPage++,m(),u(a.data.products),p()}).catch(a=>c.error({message:`${a.message}`}));return}else e.searchValue="",e.currentPage=1,await d(o).then(a=>{if(a.data.total===0){v();return}k(),m(),u(a.data.products),a.data.total<12?g():p()}).catch(a=>c.error({message:`${a.message}`})).finally(()=>e.currentPage++)}}async function ot(t){t.target.tagName!="UL"&&(e.selectedProdId=t.target.closest("li").dataset.id,await d(`https://dummyjson.com/products/${e.selectedProdId}`).then(o=>{j(o.data),H()}).catch(o=>c.error({message:`${o.message}`})))}function W(){const t=h()||[];if(t.some(o=>o===e.selectedProdId)){N(e.selectedProdId),s.addToWishBtn.textContent="Add to Wishlist";return}t.push(e.selectedProdId),w(t),s.addToWishBtn.textContent="Remove from Wishlist"}function O(){const t=_()||[];if(t.some(o=>o===e.selectedProdId)){Y(e.selectedProdId),s.addToCartBtn.textContent="Add to Cart";return}t.push(e.selectedProdId),B(t),s.addToCartBtn.textContent="Remove from Cart"}async function st(){q(),await d(S(e.searchValue,e.currentPage,e.selectedCategory)).then(t=>{t.data.total<=e.currentPage*12?(g(),c.warning({message:"Oops! You reached all of the goods!"})):p(),u(t.data.products),e.currentPage++,M()}).catch(t=>c.error({message:`${t.message}`})).finally(()=>y())}async function at(t){if(t.preventDefault(),k(),q(),b(),e.searchValue=t.target.elements.searchValue.value.trim(),!e.searchValue){c.error({message:"Please enter a valid search keyword!"});return}e.currentPage=1,await d(S(e.searchValue)).then(o=>{if(o.data.total===0){m(),g(),v(),c.info({message:"Sorry! No results"});return}else p();if(o.data.total<=(e.currentPage-1)*12){g(),c.warning({message:"Oops! You reach all of goods!"});return}m(),u(o.data.products),e.currentPage++,M()}).catch(o=>c.error({message:o.message})).finally(()=>{y()}),s.form.reset()}function rt(){s.form.elements.searchValue.value="",e.currentPage=1,m(),b(),F()}function nt(){+s.totalItemsCount.textContent?c.success({message:"Success!"}):c.error({message:"Cart is empty!"})}function G(t,o){let a;return function(...i){clearTimeout(a),a=setTimeout(()=>t.apply(this,i),o)}}function J(){window.pageYOffset>300?s.scrollUpBtn.classList.add("show"):s.scrollUpBtn.classList.remove("show")}const ct=G(J,300);function it(){window.scrollTo({top:0,behavior:"smooth"})}function lt(){$()?(L(e.light),T(!1)):(L(e.dark),T(!0))}export{E as a,k as b,Z as c,z as d,rt as e,K as f,h as g,ot as h,at as i,st as j,ct as k,it as l,Q as m,v as n,F as o,et as p,X as q,s as r,P as s,lt as t,_ as u,V as v,tt as w,nt as x};
//# sourceMappingURL=handlers-NDE3r1v7.js.map
