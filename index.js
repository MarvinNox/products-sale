import"./assets/styles-B8WhyOyT.js";import{a as $,i as a}from"./assets/vendor-X279WPgE.js";const o={listCategories:document.querySelector(".categories"),listProducts:document.querySelector(".products"),notFound:document.querySelector(".not-found"),loader:document.querySelector(".loader"),modal:document.querySelector(".modal"),productModal:document.querySelector(".modal-product"),loadMoreBtn:document.querySelector(".load-more__btn"),addToCartBtn:document.querySelector(".modal-product__btn--cart"),addToWishBtn:document.querySelector(".modal-product__btn--wishlist")};let s={LS_WL_KEY:"userWishList",LS_USER_CART_KEY:"userCart",BASE_URL_ALL:"https://dummyjson.com/products?limit=12&skip=12",SEARCH_KEY:"search?q=",CATEGORIES_KEY:"https://dummyjson.com/products/category-list",currentPage:1,selectedProdId:""};function d(t){return $.get(`${t}`)}function B(t){t.unshift("all");const e=t.map(n=>`<li class="categories__item">
            <button class="categories__btn" type="button">${n}</button>
        </li>
        `).join("");o.listCategories.innerHTML=e}function c(t){const e=t.map(({id:n,images:r,description:l,title:u,brand:m,category:p,price:P})=>`<li class="products__item" data-id="${n}">
            <img class="products__image" src="${r[0]}" alt="${l}"/>
            <p class="products__title">${u}</p>
            <p class="products__brand"><span class="products__brand--bold">Brand: ${m}</span></p>
            <p class="products__category">Category: ${p} </p>
            <p class="products__price">Price: ${P} $</p>
        </li>`).join("");o.listProducts.insertAdjacentHTML("beforeend",e)}function b({images:t,description:e,title:n,tags:r,shippingInformation:l,returnPolicy:u,price:m}){const p=`<img class="modal-product__img" src="${t[0]}" alt="${e}" />
        <div class="modal-product__content">
        <p class="modal-product__title">${n}</p>
        <ul class="modal-product__tags">${r.join(", ")}</ul>
        <p class="modal-product__description">${e}</p>
        <p class="modal-product__shipping-information">Shipping: ${l}</p>
        <p class="modal-product__return-policy">Return Policy: ${u}</p>
        <p class="modal-product__price">Price: ${m} $</p>
        
        </div>
    `;o.productModal.innerHTML=p}function h(){o.listProducts.innerHTML=""}function W(){o.notFound.classList.add("not-found--visible")}function M(){o.notFound.classList.contains("not-found--visible")&&o.notFound.classList.remove("not-found--visible")}function L(t=1){return`https://dummyjson.com/products?limit=12&skip=${(t-1)*12}`}function R(){o.loader.style.display="none"}function g(){o.loadMoreBtn.style.display="block"}function i(){o.loadMoreBtn.style.display="none"}function k(){const t=document.querySelector(".products__item").getBoundingClientRect();window.scrollBy({top:t.height*2,behavior:"smooth"})}function y(t){localStorage.setItem(s.LS_WL_KEY,JSON.stringify(t))}function _(){return JSON.parse(localStorage.getItem(s.LS_WL_KEY))}function I(t){y(_().filter(e=>e!==t))}function C(t){localStorage.setItem(s.LS_USER_CART_KEY,JSON.stringify(t))}function f(){return JSON.parse(localStorage.getItem(s.LS_USER_CART_KEY))}function A(t){C(f().filter(e=>e!==t))}function w(){o.modal.classList.add("modal--is-open"),(_()||[]).some(n=>n===s.selectedProdId)?o.addToWishBtn.textContent="Remove from Wishlist":o.addToWishBtn.textContent="Add to Wishlist",(f()||[]).some(n=>n===s.selectedProdId)?o.addToCartBtn.textContent="Remove from Cart":o.addToCartBtn.textContent="Add to Cart",document.addEventListener("keydown",S),o.addToCartBtn.addEventListener("click",v),o.addToWishBtn.addEventListener("click",T)}function q(t){(t.target.classList.contains("modal__close-btn")||t.target===t.currentTarget)&&E()}function S(t){t.key==="Escape"&&E()}function E(){o.modal.classList.contains("modal--is-open")&&o.modal.classList.remove("modal--is-open"),document.removeEventListener("keydown",S),o.addToCartBtn.removeEventListener("click",v),o.addToWishBtn.removeEventListener("click",T)}function Y(t){if(t.target.tagName==="BUTTON"){const e=t.target.textContent,n=`https://dummyjson.com/products/category/${e}`;if(e==="all"){d(s.BASE_URL_ALL).then(r=>{s.currentPage++,h(),c(r.data.products),g()}).catch(r=>a.error({message:`${r.message}`}));return}else d(n).then(r=>{if(r.data.products.length===0){W();return}M(),h(),c(r.data.products),i()}).catch(r=>a.error({message:`${r.message}`})).finally(()=>i)}}function x(t){t.target.tagName!="UL"&&(s.selectedProdId=t.target.closest("li").dataset.id,d(`https://dummyjson.com/products/${s.selectedProdId}`).then(e=>{b(e.data),w()}).catch(e=>a.error({message:`${e.message}`})))}function T(t){const e=_()||[];if(e.some(n=>n===s.selectedProdId)){I(s.selectedProdId),o.addToWishBtn.textContent="Add to Wishlist";return}e.push(s.selectedProdId),y(e),o.addToWishBtn.textContent="Remove from Wishlist"}function v(t){const e=f()||[];if(e.some(n=>n===s.selectedProdId)){A(s.selectedProdId),o.addToCartBtn.textContent="Add to Cart";return}e.push(s.selectedProdId),C(e),o.addToCartBtn.textContent="Remove from Cart"}function K(t){d(L(s.currentPage)).then(e=>{if(e.data.total<(s.currentPage-1)*12){i(),a.warning({message:"Oops! You reach and of goods!"});return}c(e.data.products),s.currentPage++,g(),k()}).catch(e=>a.error({message:`${e.message}`}))}d(s.CATEGORIES_KEY).then(t=>{B(t.data)}).catch(t=>a.error({message:`${t.message}`}));d(L(s.currentPage)).then(t=>{c(t.data.products),t.data.total>(s.currentPage-1)*12?(s.currentPage++,g()):i()}).catch(t=>a.error({message:`${t.message}`})).finally(()=>{R()});o.listCategories.addEventListener("click",Y);o.listProducts.addEventListener("click",x);o.modal.addEventListener("click",q);o.loadMoreBtn.addEventListener("click",K);
//# sourceMappingURL=index.js.map
