import"./assets/styles-B8WhyOyT.js";import{a as k,i as n}from"./assets/vendor-X279WPgE.js";const r={form:document.querySelector(".search-form"),clearSearchBtn:document.querySelector(".search-form__btn-clear"),listCategories:document.querySelector(".categories"),listProducts:document.querySelector(".products"),notFound:document.querySelector(".not-found"),loader:document.querySelector(".loader"),modal:document.querySelector(".modal"),productModal:document.querySelector(".modal-product"),loadMoreBtn:document.querySelector(".load-more__btn"),addToCartBtn:document.querySelector(".modal-product__btn--cart"),addToWishBtn:document.querySelector(".modal-product__btn--wishlist")};let o={LS_WL_KEY:"userWishList",LS_USER_CART_KEY:"userCart",BASE_URL_ALL:"https://dummyjson.com/products?limit=12&skip=12",CATEGORIES_KEY:"https://dummyjson.com/products/category-list",currentPage:1,selectedProdId:"",searchValue:""};function c(t){return k.get(`${t}`)}function W(t){t.unshift("all");const e=t.map(a=>`<li class="categories__item">
            <button class="categories__btn" type="button">${a}</button>
        </li>
        `).join("");r.listCategories.innerHTML=e}function l(t){const e=t.map(({id:a,images:s,description:u,title:m,brand:p,category:g,price:b})=>`<li class="products__item" data-id="${a}">
            <img class="products__image" src="${s[0]}" alt="${u}"/>
            <p class="products__title">${m}</p>
            <p class="products__brand"><span class="products__brand--bold">Brand: ${p}</span></p>
            <p class="products__category">Category: ${g} </p>
            <p class="products__price">Price: ${b} $</p>
        </li>`).join("");r.listProducts.insertAdjacentHTML("beforeend",e)}function M({images:t,description:e,title:a,tags:s,shippingInformation:u,returnPolicy:m,price:p}){const g=`<img class="modal-product__img" src="${t[0]}" alt="${e}" />
        <div class="modal-product__content">
        <p class="modal-product__title">${a}</p>
        <ul class="modal-product__tags">${s.join(", ")}</ul>
        <p class="modal-product__description">${e}</p>
        <p class="modal-product__shipping-information">Shipping: ${u}</p>
        <p class="modal-product__return-policy">Return Policy: ${m}</p>
        <p class="modal-product__price">Price: ${p} $</p>
        </div>
    `;r.productModal.innerHTML=g}function i(){r.listProducts.innerHTML=""}function I(){r.notFound.classList.add("not-found--visible")}function R(){r.notFound.classList.contains("not-found--visible")&&r.notFound.classList.remove("not-found--visible")}function f(t="",e=1){return t?`https://dummyjson.com/products/search?q=${t}&limit=12&skip=${(e-1)*12}`:`https://dummyjson.com/products?limit=12&skip=${(e-1)*12}`}function S(){r.loader.style.display="inline-block"}function h(){r.loader.style.display="none"}function _(){r.loadMoreBtn.style.display="block"}function d(){r.loadMoreBtn.style.display="none"}function C(){const t=document.querySelector(".products__item").getBoundingClientRect();window.scrollBy({top:t.height*1,behavior:"smooth"})}function P(t){localStorage.setItem(o.LS_WL_KEY,JSON.stringify(t))}function L(){return JSON.parse(localStorage.getItem(o.LS_WL_KEY))}function A(t){P(L().filter(e=>e!==t))}function v(t){localStorage.setItem(o.LS_USER_CART_KEY,JSON.stringify(t))}function y(){return JSON.parse(localStorage.getItem(o.LS_USER_CART_KEY))}function w(t){v(y().filter(e=>e!==t))}function q(){r.modal.classList.add("modal--is-open"),(L()||[]).some(a=>a===o.selectedProdId)?r.addToWishBtn.textContent="Remove from Wishlist":r.addToWishBtn.textContent="Add to Wishlist",(y()||[]).some(a=>a===o.selectedProdId)?r.addToCartBtn.textContent="Remove from Cart":r.addToCartBtn.textContent="Add to Cart",document.addEventListener("keydown",E),r.addToCartBtn.addEventListener("click",B),r.addToWishBtn.addEventListener("click",T)}function Y(t){(t.target.classList.contains("modal__close-btn")||t.target===t.currentTarget)&&$()}function E(t){t.key==="Escape"&&$()}function $(){r.modal.classList.contains("modal--is-open")&&r.modal.classList.remove("modal--is-open"),document.removeEventListener("keydown",E),r.addToCartBtn.removeEventListener("click",B),r.addToWishBtn.removeEventListener("click",T)}function j(t){if(t.target.tagName==="BUTTON"){const e=t.target.textContent,a=`https://dummyjson.com/products/category/${e}`;if(e==="all"){o.currentPage=2,o.searchValue="",c(o.BASE_URL_ALL).then(s=>{o.currentPage++,i(),l(s.data.products),_()}).catch(s=>n.error({message:`${s.message}`}));return}else c(a).then(s=>{if(s.data.products.length===0){I();return}R(),i(),l(s.data.products),d()}).catch(s=>n.error({message:`${s.message}`})).finally(()=>d)}}function x(t){t.target.tagName!="UL"&&(o.selectedProdId=t.target.closest("li").dataset.id,c(`https://dummyjson.com/products/${o.selectedProdId}`).then(e=>{M(e.data),q()}).catch(e=>n.error({message:`${e.message}`})))}function T(t){const e=L()||[];if(e.some(a=>a===o.selectedProdId)){A(o.selectedProdId),r.addToWishBtn.textContent="Add to Wishlist";return}e.push(o.selectedProdId),P(e),r.addToWishBtn.textContent="Remove from Wishlist"}function B(t){const e=y()||[];if(e.some(a=>a===o.selectedProdId)){w(o.selectedProdId),r.addToCartBtn.textContent="Add to Cart";return}e.push(o.selectedProdId),v(e),r.addToCartBtn.textContent="Remove from Cart"}function O(t){S(),c(f(o.searchValue,o.currentPage)).then(e=>{console.log("-1:",(o.currentPage-1)*12),console.log("0:",o.currentPage*12),e.data.total<=o.currentPage*12?(d(),n.warning({message:"Oops! You reached all of the goods!"})):_(),l(e.data.products),o.currentPage++,C()}).catch(e=>n.error({message:`${e.message}`})).finally(()=>h())}function K(t){if(t.preventDefault(),S(),o.searchValue=t.target.elements.searchValue.value.trim(),!o.searchValue){n.error({message:"Please enter a valid name!"});return}o.currentPage=1,c(f(o.searchValue)).then(e=>{if(e.data.total<=(o.currentPage-1)*12){d(),n.warning({message:"Oops! You reach all of goods!"});return}if(e.data.total===0){i(),d(),n.info({message:"Sorry! No results"});return}i(),l(e.data.products),o.currentPage++,C()}).catch(e=>n.error({message:`${e.message}`})).finally(()=>{h()}),r.form.reset()}function U(){r.form.elements.searchValue.value=""}c(o.CATEGORIES_KEY).then(t=>{W(t.data)}).catch(t=>n.error({message:`${t.message}`}));c(f(o.searchValue,o.currentPage)).then(t=>{l(t.data.products),t.data.total>(o.currentPage-1)*12?(o.currentPage++,_()):d()}).catch(t=>n.error({message:`${t.message}`})).finally(()=>{h()});r.listCategories.addEventListener("click",j);r.listProducts.addEventListener("click",x);r.form.addEventListener("submit",K);r.clearSearchBtn.addEventListener("click",U);r.modal.addEventListener("click",Y);r.loadMoreBtn.addEventListener("click",O);
//# sourceMappingURL=index.js.map
