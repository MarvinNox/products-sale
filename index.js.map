{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/constants.js","../src/js/products-api.js","../src/js/render-function.js","../src/js/helpers.js","../src/js/modal.js","../src/js/handlers.js","../src/home.js"],"sourcesContent":["//Обʼєкт з посиланнями на ДОМ елементи\n\nexport const refs = {\n    listCategories: document.querySelector(\".categories\"),\n    listProducts: document.querySelector(\".products\"),\n    notFound: document.querySelector(\".not-found\"),\n    loader: document.querySelector(\".loader\"),\n    modal: document.querySelector('.modal'),\n    productModal: document.querySelector(\".modal-product\"),\n    loadMoreBtn: document.querySelector('.load-more__btn'),\n};\n","//Константи\n\nexport let STORAGE_KEYS = {\n    LS_WL_KEY: 'userWishList',\n    BASE_URL_ALL: \"https://dummyjson.com/products?limit=12&skip=12\",\n    SEARCH_KEY: \"search?q=\",\n    CATEGORIES_KEY: \"https://dummyjson.com/products/category-list\",\n    currentPage: 1,\n};\n","// Функції для роботи з бекендом\nimport { STORAGE_KEYS } from \"./constants.js\";\n\n// API ендпоінти:\n\nimport axios from \"axios\";\n\n// https://dummyjson.com/docs/products - документація бекенду, розділ продукти\n// https://dummyjson.com/products?limit=10&skip=10 - отримати всі продукти з пагінацією\n// https://dummyjson.com/products/1 - отримати один продукт по ID\n// https://dummyjson.com/products/search?q=nail - пошук продукту по ключовому слову\n// https://dummyjson.com/products/category-list - отримати список категорій продуктів\n// https://dummyjson.com/products/category/smartphones - отримати продукти по категорії\n\nexport function pullData(KEY) {\n    return axios.get(`${KEY}`);\n};","//Функцію для створення, рендеру або видалення розмітки\nimport { refs } from \"./refs\";\nimport { STORAGE_KEYS } from \"./constants\";\n\nexport function renderCategory(arrCategories) {\n    arrCategories.unshift('all');\n    const markup = arrCategories.map((item) =>\n        `<li class=\"categories__item\">\n            <button class=\"categories__btn\" type=\"button\">${item}</button>\n        </li>\n        `).join(\"\");\n    refs.listCategories.innerHTML = markup;\n};\n\nexport function renderGoods(arrGoods) {\n    const markup = arrGoods.map(({ id, images, description, title, brand, category, price }) =>\n        `<li class=\"products__item\" data-id=\"${id}\">\n            <img class=\"products__image\" src=\"${images[0]}\" alt=\"${description}\"/>\n            <p class=\"products__title\">${title}</p>\n            <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand: ${brand}</span></p>\n            <p class=\"products__category\">Category: ${category} </p>\n            <p class=\"products__price\">Price: ${price} $</p>\n        </li>`).join(\"\");\n    refs.listProducts.insertAdjacentHTML('beforeend', markup);\n};\n\nexport function renderModal({ images, description, title, tags, shippingInformation, returnPolicy, price }) {\n    const markup =\n        `<img class=\"modal-product__img\" src=\"${images[0]}\" alt=\"${description}\" />\n        <div class=\"modal-product__content\">\n        <p class=\"modal-product__title\">${title}</p>\n        <ul class=\"modal-product__tags\">${tags.join(', ')}</ul>\n        <p class=\"modal-product__description\">${description}</p>\n        <p class=\"modal-product__shipping-information\">Shipping: ${shippingInformation}</p>\n        <p class=\"modal-product__return-policy\">Return Policy: ${returnPolicy}</p>\n        <p class=\"modal-product__price\">Price: ${price} $</p>\n        \n        </div>\n    `\n    refs.productModal.innerHTML = markup;\n};\n\nexport function clearProductsList() {\n    refs.listProducts.innerHTML = \"\";\n}","//Допоміжні функції\n\nimport { refs } from \"./refs\";\n\nexport function notFoundEnabled() {\n    refs.notFound.classList.add('not-found--visible');\n}\nexport function notFoundDisabled() {\n    if (refs.notFound.classList.contains('not-found--visible')) {\n        refs.notFound.classList.remove('not-found--visible');\n    }\n}\n\nexport function getGoodsUrl(currentPage = 1) {\n    return `https://dummyjson.com/products?limit=12&skip=${(currentPage - 1) * 12}`;\n};\n\nexport function showLoader() {\n    refs.loader.style.display = 'inline-block';\n}\nexport function hideLoader() {\n    refs.loader.style.display = 'none';\n}\nexport function showLoadMoreBtn() {\n    refs.loadMoreBtn.style.display = 'block';\n}\nexport function hideLoadMoreBtn() {\n    refs.loadMoreBtn.style.display = 'none';\n}\n","//Описана робота модалки - відкриття закриття і все що з модалкою повʼязано\nimport { refs } from \"./refs\";\nimport { addToCart, addToWishList } from \"./handlers\"\n\nexport function showModal() {\n    refs.modal.classList.add('modal--is-open');\n    document.addEventListener('keydown', escapeModal);\n};\n\nexport function hideModal(evt) {\n    if (evt.target.classList.contains(\"modal__close-btn\") || evt.target === evt.currentTarget) {\n        closeModal();\n    }\n};\n\nfunction escapeModal(evt) {\n    if (evt.key === 'Escape') {\n        closeModal();\n    }\n};\n\nfunction closeModal() {\n    if (refs.modal.classList.contains('modal--is-open')) {\n        refs.modal.classList.remove('modal--is-open');\n    }\n    document.removeEventListener('keydown', escapeModal);\n};","// Функції, які передаються колбеками в addEventListners\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { STORAGE_KEYS } from \"./constants\";\nimport { pullData } from \"./products-api\";\nimport { clearProductsList, renderGoods, renderModal } from \"./render-function\";\nimport { refs } from \"./refs\";\nimport { notFoundDisabled, notFoundEnabled } from \"./helpers\";\nimport { showModal } from \"./modal\";\nimport { addToLocal, getFromLocal } from \"./storage.js\"\nimport { getGoodsUrl, showLoadMoreBtn, hideLoadMoreBtn } from \"./helpers.js\";\n\nexport function switchCategory(evt) {\n    if (evt.target.tagName === \"BUTTON\") {\n        const selectedCategory = evt.target.textContent;\n        const selectedUrl = `https://dummyjson.com/products/category/${selectedCategory}`;\n\n        if (selectedCategory === 'all') {\n            pullData(STORAGE_KEYS.BASE_URL_ALL)\n                .then(response => {\n                    clearProductsList();\n                    renderGoods(response.data.products);\n                    showLoadMoreBtn();\n                })\n                .catch(error => iziToast.error({\n                    message: `${error.message}`\n                }));\n            return;\n        } else {\n            pullData(selectedUrl)\n                .then(response => {\n                    if (response.data.products.length === 0) {\n                        notFoundEnabled();\n                        return;\n                    }\n                    notFoundDisabled();\n                    clearProductsList()\n                    renderGoods(response.data.products)\n                    hideLoadMoreBtn()\n                })\n                .catch(error => iziToast.error({\n                    message: `${error.message}`\n                }))\n                .finally(() => hideLoadMoreBtn)\n        }\n    };\n};\n\nexport function handleSelectProduct(event) {\n    if (event.target.tagName != \"UL\") {\n        const selectedProdId = event.target.closest('li').dataset.id;\n        pullData(`https://dummyjson.com/products/${selectedProdId}`)\n            .then(response => {\n                renderModal(response.data);\n                showModal();\n            })\n            .catch(error => iziToast.error({\n                message: `${error.message}`\n            }))\n    }\n}\n\nexport function addToWishList(event) {\n\n};\nexport function addToCart(event) {\n\n};\n\nexport function handleLoadMore(evt) {\n    pullData(getGoodsUrl(STORAGE_KEYS.currentPage))\n        .then(response => {\n            renderGoods(response.data.products);\n            if (response.data.total > (STORAGE_KEYS.currentPage - 1) * 12) {\n                STORAGE_KEYS.currentPage++;\n                showLoadMoreBtn();\n            } else {\n                hideLoadMoreBtn();\n            }\n\n        })\n        .catch((error) => iziToast.error({\n            message: `${error.message}`\n        }))\n}","//Логіка сторінки Home\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { refs } from \"./js/refs\";\nimport { STORAGE_KEYS } from \"./js/constants\";\nimport { pullData } from \"./js/products-api\";\nimport {\n    renderCategory,\n    renderGoods,\n    clearProductsList\n} from \"./js/render-function\";\nimport {\n    switchCategory,\n    handleSelectProduct,\n    handleLoadMore\n} from \"./js/handlers\"\nimport { hideModal } from \"./js/modal\";\nimport {\n    showLoader,\n    hideLoader,\n    showLoadMoreBtn,\n    hideLoadMoreBtn,\n    getGoodsUrl,\n} from \"./js/helpers\";\n\n// export let currentPage = 1;\n\npullData(STORAGE_KEYS.CATEGORIES_KEY)\n    .then(response => {\n        renderCategory(response.data)\n    }\n    )\n    .catch(error => iziToast.error({\n        message: `${error.message}`\n    }))\n\n\npullData(getGoodsUrl(STORAGE_KEYS.currentPage))\n    .then(response => {\n        renderGoods(response.data.products);\n        if (response.data.total > (STORAGE_KEYS.currentPage - 1) * 12) {\n            STORAGE_KEYS.currentPage++;\n            showLoadMoreBtn();\n        } else {\n            hideLoadMoreBtn();\n        }\n    })\n    .catch(error => iziToast.error({\n        message: `${error.message}`\n    }))\n    .finally(() => {\n        hideLoader()\n\n    });\n\nrefs.listCategories.addEventListener('click', switchCategory);\nrefs.listProducts.addEventListener('click', handleSelectProduct)\n\nrefs.modal.addEventListener('click', hideModal)\n\nrefs.loadMoreBtn.addEventListener('click', handleLoadMore)"],"names":["refs","STORAGE_KEYS","pullData","KEY","axios","renderCategory","arrCategories","markup","item","renderGoods","arrGoods","id","images","description","title","brand","category","price","renderModal","tags","shippingInformation","returnPolicy","clearProductsList","notFoundEnabled","notFoundDisabled","getGoodsUrl","currentPage","hideLoader","showLoadMoreBtn","hideLoadMoreBtn","showModal","escapeModal","hideModal","evt","closeModal","switchCategory","selectedCategory","selectedUrl","response","error","iziToast","handleSelectProduct","event","selectedProdId","handleLoadMore"],"mappings":"2FAEO,MAAMA,EAAO,CAChB,eAAgB,SAAS,cAAc,aAAa,EACpD,aAAc,SAAS,cAAc,WAAW,EAChD,SAAU,SAAS,cAAc,YAAY,EAC7C,OAAQ,SAAS,cAAc,SAAS,EACxC,MAAO,SAAS,cAAc,QAAQ,EACtC,aAAc,SAAS,cAAc,gBAAgB,EACrD,YAAa,SAAS,cAAc,iBAAiB,CACzD,ECRO,IAAIC,EAAe,CACtB,UAAW,eACX,aAAc,kDACd,WAAY,YACZ,eAAgB,+CAChB,YAAa,CACjB,ECMO,SAASC,EAASC,EAAK,CAC1B,OAAOC,EAAM,IAAI,GAAGD,CAAG,EAAE,CAC7B,CCZO,SAASE,EAAeC,EAAe,CAC1CA,EAAc,QAAQ,KAAK,EAC3B,MAAMC,EAASD,EAAc,IAAKE,GAC9B;AAAA,4DACoDA,CAAI;AAAA;AAAA,SAEvD,EAAE,KAAK,EAAE,EACdR,EAAK,eAAe,UAAYO,CACpC,CAEO,SAASE,EAAYC,EAAU,CAClC,MAAMH,EAASG,EAAS,IAAI,CAAC,CAAE,GAAAC,EAAI,OAAAC,EAAQ,YAAAC,EAAa,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,MAAAC,CAAO,IACnF,uCAAuCN,CAAE;AAAA,gDACDC,EAAO,CAAC,CAAC,UAAUC,CAAW;AAAA,yCACrCC,CAAK;AAAA,oFACsCC,CAAK;AAAA,sDACnCC,CAAQ;AAAA,gDACdC,CAAK;AAAA,cACvC,EAAE,KAAK,EAAE,EACnBjB,EAAK,aAAa,mBAAmB,YAAaO,CAAM,CAC5D,CAEO,SAASW,EAAY,CAAE,OAAAN,EAAQ,YAAAC,EAAa,MAAAC,EAAO,KAAAK,EAAM,oBAAAC,EAAqB,aAAAC,EAAc,MAAAJ,GAAS,CACxG,MAAMV,EACF,wCAAwCK,EAAO,CAAC,CAAC,UAAUC,CAAW;AAAA;AAAA,0CAEpCC,CAAK;AAAA,0CACLK,EAAK,KAAK,IAAI,CAAC;AAAA,gDACTN,CAAW;AAAA,mEACQO,CAAmB;AAAA,iEACrBC,CAAY;AAAA,iDAC5BJ,CAAK;AAAA;AAAA;AAAA,MAIlDjB,EAAK,aAAa,UAAYO,CAClC,CAEO,SAASe,GAAoB,CAChCtB,EAAK,aAAa,UAAY,EAClC,CCxCO,SAASuB,GAAkB,CAC9BvB,EAAK,SAAS,UAAU,IAAI,oBAAoB,CACpD,CACO,SAASwB,GAAmB,CAC3BxB,EAAK,SAAS,UAAU,SAAS,oBAAoB,GACrDA,EAAK,SAAS,UAAU,OAAO,oBAAoB,CAE3D,CAEO,SAASyB,EAAYC,EAAc,EAAG,CACzC,MAAO,iDAAiDA,EAAc,GAAK,EAAE,EACjF,CAKO,SAASC,GAAa,CACzB3B,EAAK,OAAO,MAAM,QAAU,MAChC,CACO,SAAS4B,GAAkB,CAC9B5B,EAAK,YAAY,MAAM,QAAU,OACrC,CACO,SAAS6B,GAAkB,CAC9B7B,EAAK,YAAY,MAAM,QAAU,MACrC,CCxBO,SAAS8B,GAAY,CACxB9B,EAAK,MAAM,UAAU,IAAI,gBAAgB,EACzC,SAAS,iBAAiB,UAAW+B,CAAW,CACpD,CAEO,SAASC,EAAUC,EAAK,EACvBA,EAAI,OAAO,UAAU,SAAS,kBAAkB,GAAKA,EAAI,SAAWA,EAAI,gBACxEC,GAER,CAEA,SAASH,EAAYE,EAAK,CAClBA,EAAI,MAAQ,UACZC,GAER,CAEA,SAASA,GAAa,CACdlC,EAAK,MAAM,UAAU,SAAS,gBAAgB,GAC9CA,EAAK,MAAM,UAAU,OAAO,gBAAgB,EAEhD,SAAS,oBAAoB,UAAW+B,CAAW,CACvD,CCbO,SAASI,EAAeF,EAAK,CAChC,GAAIA,EAAI,OAAO,UAAY,SAAU,CACjC,MAAMG,EAAmBH,EAAI,OAAO,YAC9BI,EAAc,2CAA2CD,CAAgB,GAE/E,GAAIA,IAAqB,MAAO,CAC5BlC,EAASD,EAAa,YAAY,EAC7B,KAAKqC,GAAY,CACdhB,IACAb,EAAY6B,EAAS,KAAK,QAAQ,EAClCV,GACpB,CAAiB,EACA,MAAMW,GAASC,EAAS,MAAM,CAC3B,QAAS,GAAGD,EAAM,OAAO,EAC5B,CAAA,CAAC,EACN,MACZ,MACYrC,EAASmC,CAAW,EACf,KAAKC,GAAY,CACd,GAAIA,EAAS,KAAK,SAAS,SAAW,EAAG,CACrCf,IACA,MACH,CACDC,IACAF,EAAmB,EACnBb,EAAY6B,EAAS,KAAK,QAAQ,EAClCT,EAAiB,CACrC,CAAiB,EACA,MAAMU,GAASC,EAAS,MAAM,CAC3B,QAAS,GAAGD,EAAM,OAAO,EAC7C,CAAiB,CAAC,EACD,QAAQ,IAAMV,CAAe,CAE9C,CACA,CAEO,SAASY,EAAoBC,EAAO,CACvC,GAAIA,EAAM,OAAO,SAAW,KAAM,CAC9B,MAAMC,EAAiBD,EAAM,OAAO,QAAQ,IAAI,EAAE,QAAQ,GAC1DxC,EAAS,kCAAkCyC,CAAc,EAAE,EACtD,KAAKL,GAAY,CACdpB,EAAYoB,EAAS,IAAI,EACzBR,GAChB,CAAa,EACA,MAAMS,GAASC,EAAS,MAAM,CAC3B,QAAS,GAAGD,EAAM,OAAO,EACzC,CAAa,CAAC,CACT,CACL,CASO,SAASK,EAAeX,EAAK,CAChC/B,EAASuB,EAAYxB,EAAa,WAAW,CAAC,EACzC,KAAKqC,GAAY,CACd7B,EAAY6B,EAAS,KAAK,QAAQ,EAC9BA,EAAS,KAAK,OAASrC,EAAa,YAAc,GAAK,IACvDA,EAAa,cACb2B,KAEAC,GAGhB,CAAS,EACA,MAAOU,GAAUC,EAAS,MAAM,CAC7B,QAAS,GAAGD,EAAM,OAAO,EACrC,CAAS,CAAC,CACV,CCzDArC,EAASD,EAAa,cAAc,EAC/B,KAAKqC,GAAY,CACdjC,EAAeiC,EAAS,IAAI,CAC/B,CACA,EACA,MAAMC,GAASC,EAAS,MAAM,CAC3B,QAAS,GAAGD,EAAM,OAAO,EACjC,CAAK,CAAC,EAGNrC,EAASuB,EAAYxB,EAAa,WAAW,CAAC,EACzC,KAAKqC,GAAY,CACd7B,EAAY6B,EAAS,KAAK,QAAQ,EAC9BA,EAAS,KAAK,OAASrC,EAAa,YAAc,GAAK,IACvDA,EAAa,cACb2B,KAEAC,GAEZ,CAAK,EACA,MAAMU,GAASC,EAAS,MAAM,CAC3B,QAAS,GAAGD,EAAM,OAAO,EACjC,CAAK,CAAC,EACD,QAAQ,IAAM,CACXZ,EAAY,CAEpB,CAAK,EAEL3B,EAAK,eAAe,iBAAiB,QAASmC,CAAc,EAC5DnC,EAAK,aAAa,iBAAiB,QAASyC,CAAmB,EAE/DzC,EAAK,MAAM,iBAAiB,QAASgC,CAAS,EAE9ChC,EAAK,YAAY,iBAAiB,QAAS4C,CAAc"}